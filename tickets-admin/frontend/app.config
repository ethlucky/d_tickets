server:
  port: 9000
  shutdown: graceful  # 启用内置优雅关闭
  id: 1

spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource # 显式指定
    url: jdbc:mysql://120.55.65.180:60100/db_veeyii?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=Asia/Shanghai&useCursorFetch=true&rewriteBatchedStatements=true
    username: root
    password: Geek@135#
    driver-class-name: com.mysql.cj.jdbc.Driver
    # HikariCP专属配置
    hikari:
      register-mbeans: true  # 关键配置！启用JMX注册
      pool-name: VeeYiiHikariPool
      connection-init-sql: "SELECT 1"    # 连接创建时的测试SQL
      maximum-pool-size: 20          # 最大连接数（推荐值：CPU核心数 * 2 + 1）
      minimum-idle: 5                # 最小空闲连接
      max-lifetime: 540000       # 9分钟（540秒），必须小于MySQL的wait_timeout
      idle-timeout: 300000       # 5分钟（300秒）
      connection-timeout: 30000  # 30秒
      validation-timeout: 5000   # 5秒
      leak-detection-threshold: 120000  # 2分钟
      connection-test-query: SELECT 1
      allow-pool-suspension: true
      keepalive-time: 300000
  #      jdbc-url: jdbc:mysql://127.0.0.1:3306/db_shenshi?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&serverTimezone=Asia/Shanghai&useCursorFetch=true&rewriteBatchedStatements=true
  #      username: admin
  #      password: 123456
  #      driver-class-name: com.mysql.cj.jdbc.Driver

  lifecycle:
    timeout-per-shutdown-phase: 30s # 全局关闭超时
  aop:
    auto: true
    proxy-target-class: true
  redis:
    # Redis数据库索引（默认为0）
    database: 1
    host: 120.55.65.180
    port: 60058
    # 连接超时时间
    timeout: 10s
    lettuce:
      pool:
        max-active: 8 #最大连接
        max-idle: 8 #最大空闲连接
        min-idle: 0 #最小空闲连接
        max-wait: 1000ms #连接等待时间
    password: Geek@135#
  rabbitmq:
    dynamic: true # 启用动态队列支持
    host: 222.186.144.74
    port: 60125
    username: test522
    password: Geek@135#
    virtual-host: steam
    # 可选高级配置
    listener:
      simple:
        missing-queues-fatal: false # 允许监听不存在的队列
        acknowledge-mode: auto  # 自动确认消息（支持重试）
        concurrency: 3            # 最小消费者线程数
        max-concurrency: 20       # 最大线程数
        prefetch: 1  # 控制每次消费的消息数
        retry:
          enabled: true           # 启用重试机制
          max-attempts: 3         # 最大重试次数（包含首次尝试）
          initial-interval: 1s    # 初始重试间隔
          multiplier: 2.0         # 重试间隔倍数（指数退避）
          max-interval: 10s       # 最大重试间隔
        default-requeue-rejected: false  # 重试耗尽后不重新入队

http:
  maxTotal: 100         #最大连接数
  defaultMaxPerRoute: 20  #并发数
  connectTimeout: 1000   #创建连接的最长时间
  connectionRequestTimeout: 500  #从连接池中获取到连接的最长时间
  socketTimeout: 60000 #数据传输的最长时间
  staleConnectionCheckEnabled: true  #提交请求前测试连接是否可用
  validateAfterInactivity: 3000000   #可用空闲连接过期时间,重用空闲连接时会先检查是否空闲时间超过这个时间，如果超过，释放socket重新建立

mybatis-plus:
  mapper-locations: classpath*:/mapper/*.xml

sa-token:
  refer-url: localhost;http://127.0.0.1:8081/
  # token 名称（同时也是 cookie 名称）
  token-name: VEEYII-TOKEN
  # token 有效期（单位：秒） 默认30天，-1 代表永久有效
  timeout: 604800
  # token 最低活跃频率（单位：秒），如果 token 超过此时间没有访问系统就会被冻结，默认-1 代表不限制，永不冻结
  active-timeout: 86400
  # 是否允许同一账号多地同时登录 （为 true 时允许一起登录, 为 false 时新登录挤掉旧登录）
  is-concurrent: false
  # 在多人登录同一账号时，是否共用一个 token （为 true 时所有登录共用一个 token, 为 false 时每次登录新建一个 token）
  is-share: false
  # token 风格（默认可取值：uuid、simple-uuid、random-32、random-64、random-128、tik）
  # 是否输出操作日志
  is-log: true
  jwt-secret-key: e016ae91bc7e407f9c519fe4aa2128d7
  cookie:
    #    domain: shenshisteam.com;localhost
    path: /
    httpOnly: true
    sameSite: Lax

ys:
  api:
    endpoints:
      - baseUrl: https://shenshi888.yousheng.shop
        username: develop
        password: develop
      - baseUrl: https://sskf.yousheng.shop
        username: develop
        password: develop
      - baseUrl: https://zxmanchong.yousheng.shop
        username: '010101'
        password: '010101'
      - baseUrl: https://fynn77.yousheng.shop
        username: shenshi
        password: shenshi
    remark:
      baseUrl: https://shenshi888.yousheng.shop
